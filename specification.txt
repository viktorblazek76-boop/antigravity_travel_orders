Cestovní pøíkazy1.	Úvod	11.1	Rozsah projektu	11.2	Cíle	11.3	Audience	11.4	Související dokumenty	11.5	Termíny/Akronymy a definice	11.6	Rizika a pøedpoklady	22.	Obecný pøehled	22.1	Závislosti a dopad zmìn	22.1.1	Systémové závislosti	22.1.2	Dopady zmìn	23.	Návrh øešení	23.1	Bussiness proces	33.2	Use case diagram	43.3	Datová vrstva	63.3.1	Základní tabulky	73.3.2	Èíselníky	133.3.3	Konfigurace	154.	Funkèní specifikace	174.1	REQ-01: Zadání cestovního pøíkazu	174.1.1 REQ-01a: Vytvoøení tuzemského cestovního pøíkazu	184.1.2 REQ-01b: Vytvoøení zahranièního cestovního pøíkazu	214.1.3 REQ-01c: Rozfázování cestovního pøíkazu	234.1.3.1 REQ-01ca: Export/Import	244.1.4 REQ-01d: Uložení CP bez odeslání ke schválení	244.2	REQ-02: Schvalování cestovního pøíkazu a schvalování vyúètování	254.3	REQ-03: Editace cestovního pøíkazu	254.4	REQ-04: Vyúètování služební cesty	264.4.1	REQ-04a: Vyúètování tuzemské služební cesty	274.4.2	REQ-04b: Vyúètování zahranièní služební cesty	284.4.3	REQ-04c: Výpoèet tuzemského stravného	284.4.4	REQ-04d: Výpoèet zahranièního stravného	294.4.5	REQ-04e: Konverze zahranièních nákladù na domácí mìnu	314.4.6	REQ-04f: Výpoèet jízdného	314.4.7	REQ-04g: Výpoèet náhrady za osobní  vozidla	314.4.8	REQ-04h: Výpoèet kapesného	324.4.9	REQ-04i: Nahrání pøíloh	324.5	V   REQ-05: Archivace cestovního pøíkazu	334.6	REQ-06: Správa èíselníkù	354.6.1 REQ-06a: Integrace èíselníkù s ERP	384.6.2 REQ-06b: Integrace hodnot smìnných kurzù	404.6.3. REQ-06c: Import hodnot do èíselníkù	414.6.4 REQ-06d: Úprava záznamu v èíselníku	424.6.5 REQ-06e: Pøidání nového èíselníku	434.6.5 REQ-06f: Pøidání nové dimenze do èíselníku Vozidel a Zamìstnanci	434.7	REQ-07: Synchronizace CP s ERP	444.7.1 REQ-07a: Synchronizace ERP -> CP	444.7.2 REQ-07b: Synchronizace CP -> ERP	454.8	REQ-08: Pøizpùsobení cestovního pøíkazu	464.9	REQ-09: Tisk CP	474.10	REQ-10: Kopírování CP	484.11	REQ-11: Okno s fakty	484.12	REQ-12: Proklik na kartu zamìstnance	494.13	REQ-13: Role a oprávnìní	504.14	REQ-14: Autentizace a autorizace uživatele	514.15	REQ-15: Reporty	514.16	REQ-16: Retence dat	514.17	REQ-17: Jazyková mutace	514.18	REQ-18: Nastavení konfigurace	524.18.1	REQ-18a: Zmìna nastavení	524.18.2	REQ-18b: Pøidání typu nákladù	52VerzePublikovánoÚpravy1.026.7.2024ÚvodÚèelem tohoto dokumentu s požadavky na podnikání (BRS) je poskytnout podrobný popis požadavkù na vývoj a implementaci systému Cestovní pøíkazy. Tento dokument popisuje základní funcionality nezbytné pro chod aplikace a podklad pro následující fáze životního cyklu projektu, vèetnì návrhu, vývoje, testování a nasazení. Rozsah projektuTato specifikace zahrnuje rozpracování use casù a návrhu funkcionalit na základì požadavkù KM. Projekt zahrnuje základní wireframy a nástin integraèního rozhraní. Dokument nezahrnuje UI, a zvolenou technologii pro vývoj aplikace. CíleHlavními cíli systému Cestovní pøíkazy jsou:Splnit základní fáze cestovních pøíkazùØešit synchronizacia interakci s okolními systémyZlepšuje User experienceProvádí výpoèet stravného AudienceTento dokument je urèen proProjektového manažera a obchodního týmu, kteøí využijí dokument k pochopení požadavkù a zajištìní realizaceVývojové a technické týmy, pro které slouží jako zadáníQuality Assurence tým pro otestování jednotlivých funcionalityJakýchkoli dalších stran zapojených do životního cyklu projektu Související dokumenty Termíny/Akronymy a definiceZkratkaNázevPopisCPCestovní pøíkazERPEnterprise resource planningPodnikový informaèní systémDBDatabaseDatabázeRESTRepresentational State TransferFramework pro komuniakci mezi APIAPIApplication programming interfaceRozhraní Rizika a pøedpokladyOmezeníProjekt je vyvinutý na základì zadání KM, proto finální aplikace bude záviset na požadavcích a technologických možnostech OZP. Analýza se nezabírá fází schvalování, u které bude rozhoduto, zda se bude realizovat internì v rámci aplikace nebo externì.Do aplikace se musí dostat hierarhická nebo projektová struktura, která bude definovat schvalovatele, oprávnìní, práva zadávat pøíkaz, apod.Aplikace bude muset øešit, jakse zachovat ke zmìnì dat v prùbìhu životního cyklu cestovních pøíkazù. Pøedpoklady:Schvalovací workflow bude realizováno externìSchvalovací workflow mùže a nemusí nastatDo cestovních pøíkazù bude muset být naimportována hierarchická struktura k nadefinování oprávnìní a schvalovacích úrovníCestovní pøíkazy se nedají vymazatPro tento dokument nemùže nastat situace, kdy by došlo zneplatnìní nebo zmìnì záznamu, pokud je na nìj navázaný cestovní pøíkaz neuzavøenýDefinice stavu cestovního pøíkazu bude vycházet z implementace externího workflow schvalováníObecný pøehled Pro systém cestovních pøíkazù je zvolena tøívrstvá architektura, která se skládá z datové, funkèní a prezenèní vrstvy. Web desing bude responzivní.  Závislosti a dopad zmìnSystémové závislostiJedná se o Standalone systém, ale naplnìní dat a synchronizace s okolními systémy bude záviset na triggeru a napojeníDopady zmìnSystém bude integrován s ERP a úèetní knihou. Zmìny v plnìní polí i datové struktuøe budou muset být konzultovány mezi všemi stranami.Návrh øešení/ Business procesProces zadání cestovních pøíkazù se skládá z následujících aktivit. Existují dva schvalovací procesy, které mohou a nemusí nastat v závislosti na systémové parametrizaci.Zadání cestovních pøíkazùMožnost rozfázování cestovních pøíkazùZadání plánovaných cestovních nákladùSchvalováníVyplnìní skuteèných cestovních nákladùSchvalování cestovních nákladùArchivace cestovních pøíkazù a synchronizace s úèetní knihou/ Use case diagramSchvalovatel/Správce/Systém/Uživatel/ Logický modelDatová vrstva zohleïnuje vazby mezi entitami a jejich vztahy k cestovním pøíkazùm. Základní entity:Cestovní pøíkazZamìstnanecSkuteèný nákladDílèí nákladPlánovaný nákladVozidloBankovní úèetPlatební kartaZálohaPrùbìh CP/ Návrh datového modelu/Základní tabulkyTravel OrderPole PovinnéTypPopisIDYGUIDVnitøní identifikátorSequenceNumberYStringÈíslo CP z nadefinované èíselné øady TravelOrderTypeYTravel Order TypeEnumerace – tuzemský, zahranièníEmployeeIDYGUIDFK do tabulky Zamìstnanec, Zamìstnanec, který vyplní cestovní pøíkazSpolucestující NStringtextové pole, bez relace TravelPurposeYStringtextové pole VehicleTypeNVehiclePlannedStartDateYDate Výbìr z kalendáøe, pouze >= sysdatePlannedEndDateYDate Výbìr z kalendáøe, pouze >= sysdateApprovalStatusYApproval StatusApprovalFlagYbooleanPøíznak, zda CP pùjde do schvalování nebo ne, bude vyplnìno na základì konfiguraceCreatedByYZamìstnanecFK do tabulky ZamìstnanecCreatedOnYdateArchivedByNdateDatum archivaceArchivedOnNEmployeeID zamìstnance, který CP archivoval. V pøípadì automatického archivování plnì schváleného pøíkazu = ID zamìstnance, který CP naposledy schválil. V pøípadì manuální archivace se jedná o ID zamìstnance, který má roli správce. V pøípadì automatického jobu bude nutno poznaèit, že CP byl archivován systémem.DepositPole PovinnéTypPopisIDYGUIDVnitøní identifikátorYdecimalForeignAmountdecimalTravelOrderIDYTravel OrderFK do tabulky Cestovního pøíkazuLocalCurrencyIDYCurrencyFK do tabulky mìnyForeignCurrencyIDYCurrencyDueDateYDatePlanned Travel ExpensesPole PovinnéTypPopisIDYGUIDVnitøní identifikátorLocalAmountYdecimalForeignAmountdecimalTravelOrderIDYTravel OrderFK do tabulky Cestovního pøíkazuTravelExpenseDateYdateDatum plánovaného vzniku nákladuDescriptionNstringLocalCurrencyIDNMìnaFK do tabulky mìnyForeignCurrencyIDNMìnaFK do tabulky mìnyTravelExpenseTypeYTravel Expense TypeTotal expense – souèet všech nákladùPole PovinnéTypPopisIDYGUIDVnitøní identifikátorBankAccountIDNIntegerÈíslo CP z nadefinované èíselné øady AmountYdecimalTravelOrderIDYTravel OrderFK do tabulky Cestovního pøíkazuCurrencyIDYCurrencyApprovalStatusYApproval StatusTBDDIsbursementTypeYDisbursement TypePartial Expense – dílèí náklad, rozlišujeme typ nákladùPole PovinnéTypPopisIDYGUIDVnitøní identifikátorTotalAmountIDYTotal AmountFK do tabulky Skuteèný náklad ExpenseTypeYExpense TypeFK do tabulky Typ nákladuLocalAmountYdecimalV pøípadì, že se jedná o zahranièná náklad - pøepoèetForeignAmountNdecimalV pøípadì zahranièního nákladu ExpenseDateNdatetimeDatum vzniku nákladuLocalCurrencyIDYCurrencyFK do tabulky mìny, pokud se jedná o zahranièní náklad – pøepoèetForeignCurencyIDNCurrencyFK do tabulky mìnyJízdné  Vehicle Expense (Dìdiènost z Dílèího nákladu) bude se používat pro výpoèet jízdného a náhrad za osobní automobilPole PovinnéTypPopisFuelPriceNdecimalMileageNdecimalVehiclePole PovinnéTypPopisIDYGUIDVnitøní identifikátorFuelTypeYDruh PalivaCombinedFuelConsumptionYdecimalModelYstringPurchasePriceNdecimalLicensePlateYstringValidFromYdateValidToNdateVehicle TypeYTypTyp vozidlaVINNstringVýèetVehicle OwnershipYVehicle OwnershipNávaznost do èíselníku - Soukromé, firemníOwnerNEmployeeFK do tabulky zamìstnanec, pouze u soukromého automobiluVehicle UsageNVehicle UsageEngineDisplacementNdecimalBrandNstringEmployeePole PovinnéTypPopisIDYGUIDVnitøní identifikátorEmployeeCodeNstringUnikátní, napø. NIKURBFirstnameYstringSurnameYstringEmailNstringPhoneNumberNstringValidFromYdateValidToNdateBank AccountPole PovinnéTypPopisIDYGUIDVnitøní identifikátorBankAccountNumberYstringIBANNstringID SWIFTNstringFK do tabulky SWIFTNameNstringValidFromYdateFK do èíselníku stavValidToNdateEmployeeIDYZamìstnanecFK do tabulky ZamìstnancùCredit CardPole PovinnéTypPopisIDYGUIDVnitøní identifikátorCreditCardCodeYstringMaskedPANYstringExpectedDeliveryDateYstringCardholderYstringExpiryDateNdateValidFromYdateValidToNdateEmployeeIDNDimension Pole PovinnéTypPopisIDYGUIDVnitøní identifikátorNameYstringValidFromYDateValidToNDateCurrencyPole PovinnéTypPopisIDYGUIDVnitøní identifikátorLocalCurrencyYbooleanBoolean, který urèuje domácí mìnu, pro urèení nákladù v zahranièním cestovním pøíkazuCurrencyCodeYStringKod mìnyDescriptionYStringNázev mìnyExchange RatePole PovinnéTypPopisIDYGUIDVnitøní identifikátorDateYDateDatum k níž je spoèítán kurzCurrencyIDYFK do èíselníku mìnyAmountYExchangeRateYdecimalAttachmentPole PovinnéTypPopisIDYGUIDVnitøní identifikátorPartialExpenseIDYFK do tabulky dílèího nákladuSWIFTPole PovinnéTypPopisIDYGUIDVnitøní identifikátorNameYStringSWIFTCodeYStringZemìPole PovinnéTypPopisIDYGUIDVnitøní identifikátorCurrencyIDYMìnaFK do tabulky MìnyISONumberCodeYStringISOCodeYStringNameYStringLocalCountryYbooleanJazyky - pøesunuto do konfiguracePole PovinnéTypPopisIDYGUIDVnitøní identifikátorEnumeraceDisbursement TypeVýèetBankCard CashTravel Order TypeVýèetDomesticForeignFuel TypeVýèetNatural 98Natural 95DieselElectricityVehicle OwnershipVýèetPrivateCorporateVehicle UsageVýèetIndividualSharedTransport typeVýèetPrivate carPrivate motorbikeCompany carCompany motorbikeTruckBusPlaneTrainPublic transportShipTaxiBy FootExpense TypeVýèetRoundingVehicle usageMileage and fuelLodgingMeal allowanceSecondary expensesAllowanceKonfiguraceNásledující konfigurace bude moci oprávnìný uživatel mìnit v aplikaci.Domestic per diem ratesSazby tuzemských cestovních náhradPoužívá se k výpoètùm náhrad stravného./Název polePopisTravel duration 1Trvání cesty 1Integer, zobrazuje se v hodináchTravel duration 2Trvání cesty 2Travel duration 3Trvání cesty 3Meal allowance 1Stravné 1Decimal Meal allowance 2Stravné 2Decimal Meal allowance 3Stravné 3DecimalMeal allowance reduction % 1Krácení stravné % 1V procentechMeal allowance reduction % 2Krácení stravné % 2V procentechMeal allowance reduction % 3Krácení stravné % 3V procentechValid FromPlatnost OdValid ToPlatnost DoInternational per diem ratesSazby tuzemských cestovních pøíkazùPoužívá se k výpoètùm náhrad stravného./Název polePopisCountry codeKód zemìRelace do èíselníku „Zemì“, napø: FRACurrency codeKód mìnyRelace do èíselníky „Mìny“, napø. EURPer diem rateSazbaInteger, napø. 45Travel allowance %Denní kapesné %Travel duration 1Trvání cesty 1Integer, uvedeno v hodinách, napø. 18Travel duration 2Trvání cesty 2Integer, uvedeno v hodinách, napø. 12Meal allowance % 1Stravné % 1Decimal, Uvedeno v procentechMeal allowance % 2Stravné % 2Decimal, Uvedeno v procentechMeal allowance reduction % 1Krácení stravné % 1Integer, uvedeno v procentechMeal allowance reduction % 2Krácení stravné % 2Integer, uvedeno v procentechMeal allowance reduction % 3Krácení stravné % 3Integer, uvedeno v procentechValid FromPlatnost odValid ToPlatnost doGeneral settingsObecné nastaveníNázev polePopisÈíselná øada – tuzemský CPÈíselná øada – tuzemský CPCode (20), napø. TCP24000001Èíselná øada – zahranièní CPÈíselná øada – zahranièní CPCode (20), napø. ZCP24000001Meal allowance rounding precisionPøesnost zaokrouhlení stravnéhoPøesnost zaokrouhlení stravného pøi krácení stravného, napø. 0,01; 0,10; 1,00Rounding meal allowance MethodZpùsob zaokrouhlení stravnéhoZpùsob zaokrouhlení stravného pøi krácení stravnéhoNapø. Nahoru, dolùMinimum foreign travel duration with domestic meal allowanceMin. doba trvání zahr. cesty s tuz. stravnýmNapø. 5 hodMinimum foreign travel duration without domestic meal allowanceMin. doba trvání zahr. cesty bez tuzemského stravnéhoNapø. 1 hodPayment term (days)Platební podmínka (dny)Napø. 10Vehicle ratesSazby tuzemských cestovních pøíkazùNázev polePopisReimbursement rate for usage of private vehicleSazba náhrad za soukromé vozidloCena pro výpoèet náhrad za použití soukromého vozidla, napø. 5,60Reimbursement rate for usage of private single-track motor vehicleSazba náhrad za soukromé jednostopé motorové vozidloManual updateManuální zmìnaNázev polePopisEmployeeZamìstnanciBoolean – ano neVehicleVozidlaBank accountBankovní úètySWIFTSWIFTCredit cardPlatební kartyCountryZemìCurrencyMìnaDimensionDimenzeLanguageJazykPole PovinnéTypPopisDefaultYBooleanLanguageYstringNapø. EN, CZSchvalováníApprovalsPole PovinnéTypPopisPlanned Business tripYBooleanSchvalování výjezdu - je nutné schvalovatBillingYBooleanSchvalování vyúètování - je nutné schvalovatFunkèní specifikace REQ-01: Zadání cestovního pøíkazuUživatel vybere pøíslušný cestovní pøíkaz – tuzemský nebo zahranièní. UCZadání cestovního pøíkazuHlavní aktérUživatelSpouštìèPøedpokladUživatel má pøístup do systémuUživatel vyplní všechna povinná poleNásledekHodnoty se uloží do databázeZmìní se stav cestovního pøíkazuHlavní scénáøUživatel vybere formuláøUživatel vyplní formuláøUživatel odešle formuláø ke schválení RozšíøeníSpeciální požadavkyOtevøené otázky/4.1.1 REQ-01a: Vyplnìní formuláøeUser story: Jako uživatel cestovních pøíkazù chci správnì vyplnit formuláø, abych dostal schválení vycestovat.Acceptance criteria: Cestovní pøíkaz se podaøí vyplnit a odeslat.Prohlédnu si odeslaný cestovní pøíkaz a obsahuje správné hodnoty.//Uživatel vyplòuje pøedepsaný formuláø. Pøi otevøení cestovního pøíkazuse automaticky vygeneruje   èíslo CP. V rámci formuláøe budou nìkterá pole povinná a jejich vyplnìní se bude vynucovat. FormuláøSekce cestovní pøíkazPole jsou seøazeny podle toho, jak by za sebou mìly následovat.Pole PovinnéTypPopisÈísloYStringÈíslo CP z nadefinované èíselné øady, unikátní, nebude se zobrazovat uživateli, ukládá se do DB v pøípadì, že se vytvoøí cestovní pøíkaz.Èíslo zamìstnance YStringÈíslo zamìstnance, relace na èíselník zamìstnancù. Pokud má uživatel práva na navádìní cestovního pøíkazu za jiné osoby, bude zde drop down menu s oprávnìnými èísly zamìstnancù, v ostatních pøípadech bude needitovatelné.Jméno zamìstnance YZamìstnanecJméno zamìstnance, naplní se automaticky po doplnìní "Èíslo zamìstnance" Spolucestující NStringTextové pole pole, bez relace Úèel cesty YStringTextové pole Typ vozidla NArrayrelace na èíselník "Typy vozidel", možnost zadat více hodnot  (2,3,4,n..)Èíslo vozidla NPole bude povinné v pøípadì, že Typ vozidla = osobní nebo služební automobil èi motorka, jinak pole bude prázdné a needitovatelné.Uživatel bude vybírat z dostupné flotily - soukromá vozidla navázaná na danou osobu + flotila firemních vozidel. (Zda uživatel uvidí celou flotilu, bude doøešeno). Pokud bude zadáno vícero typù vozidla, napø. automobil služební + automobil soukromý, mìla by být možnost zadat i vícero èísel vozidel.Plánované poèáteèní datum YDate Výbìr z kalendáøe, pouze >= sysdatePlánované koncové datum YDate Výbìr z kalendáøe, pouze >= sysdate a zároveò >= plánované poèáteèní datum.Stav schválení plánu YStav schváleníhodnoty Ve zpracování, Ve schvalování, Schváleno, Zamítnuto,Default= Ve zpracováníSekce Plánované nákladySekce plánovaných nákladù není povinná.Pole PovinnéTypPopisTyp nákladuNStringRelace na typ nákladu.Datum nákladu NStringÈíslo zamìstnanDatum plánovaného vzniku nákladuPopisNstringTextové poleKód mìnyNMìnaPouze pro zahranièní cestovní pøíkaz!Drop down menu.Jinak se poèítá automaticky s mìnou lokální.Èástka YDecimalÈástka (LM)NDecimalPouze pro zahranièní cestovní pøíkaz!Pøepoèet na lokální mìnuJinak se poèítá automaticky s mìnou lokálníCelkemYDecimalAplikace bude provádìt automatický souèet per daná mìna. NeeditovatelnéCelkem (LM)YDecimalPouze pro zahranièní cestovní pøíkaz!  Všechny plánované náklady seèteny a pøevedeny do lokální mìny Jinak se poèítá automaticky s mìnou lokální.NeeditovatelnéSekce ZálohaSekce zálohy není povinná.Záloha mùže být rozdìlena na více èástí, kdy každá èástka mùže být vyplacena jiným zpùsobem. Validace:Výše zálohy nesmí být vìtší než souèet plánovaných výdajùPole PovinnéTypPopisÈástka zálohy ZálohaNdecimalÈástka požadované zálohyKód mìnyYMìnaVýbìr mìny zobrazovat a zpovinit pouze u zahranièních cestovních pøíkazù! U tuzemských CP není tøeba zobrazovat, bude se automaticky poèítat s lokální mìnouDatum splatnostiNdateDatum, do kdy má být vplacena zálohaZpùsob proplaceníNTyp vyplaceníDrop down menu navázané na èíselník Typ vyplacení. Povinné, pokud by mìla být vyplacena záloha , tj. Záloha > 0.Bankovní úèetNBankovní úèetPovinné v pøípadì výbìru Typ vyplacení = Bankovní úèet. Pokud má zamìstnanec pouze jeden úèet, defaultnì se vyplní.Platební kartaNPlatební kartaPovinné v pøípadì výbìru Typ vyplacení = Platební karta. Pokud má zamìstnanec pouze jednu pøiøazenou kartu, defaultnì se vyplní.Èástka zálohy (LM)Pouze u zahranièního cestovního pøíkazu!Needitovatelné, pøepoèet v pøípadì zálohy v cizí mìnì4.1.1 REQ-01ab: Validace formuláøeUser story: Jako uživatel CP chci vìdìt, které pole musím a jak je mám naplnit.Acceptance criteria: V pøípadì nesplnìní validací formuláø zobrazí chyby.Seznam validací:Validace povinných polí. Nelze odeslat formuláø bez polí, která jsou oznaèena jako povinnéValidace zálohy - Záloha nemùže být vìtší než suma plánovaných výdajùValidace datumù - všechny datové položky se musí nacházet v budoucnosti, poèáteèní datum musí být døíve než koncové datumValidace importu záznamù viz kapitola 4.1.3.1Pokud validace nebude naplnìna, vyskoèí pøíslušná errová hláška a pole se zvýrazní.4.1.2 REQ-01b: Vytvoøení zahranièního cestovního pøíkazuFormuláø zahranièního cestovního pøíkazu bude vypadat stejnì jako tuzemský cestovní pøíkaz s jediným rozdílem – v sekci plánovaných nákladù a zálohy bude možno vybrat mìnu. Pokud mìna není vybrána, jedná se o mìnu, která je nastavena jako lokální. Položky formuláøe jsou vylistovány v kapitole 4.1.1. Odeslání formuláøe probíhá stejnì jako v kapitole 4.1.1./Sekce Plánované nákladyPole PovinnéTypPopisKód mìnyNMìnaMìna v níž jsou vyjádøené plánované náklady Sekce ZálohaUživatel mùže požádat o zálohu v nìkolika rùzných mìnách. Výbìr mìn nebude omezen výjezdovou zemí.Validace:Souèet záloh pøevedený do lokální mìny nesmí pøesáhnout souèet plánovaných nákladùStejnì jako v kapitole 4.1.1 platí že záloh mùže být více vyplaceno rùznými zpùsobyPole PovinnéTypPopisKód mìnyNMìnaMìna v níž jsou vyjádøené plánované náklady 4.1.3 REQ-01c: Rozfázování cestovního pøíkazuUživatel bude mít možnost pomocí tlaèítka rozfázovat cestovní pøíkaz. Jedná se o pøípad opakující se služební cesty, popø. služební cesty na vícero dní, kdy uživatel chce hromadnì zaznaèit prùbìh a plánované náklady spojené se služební cestou. Pøi vytvoøení fází cestovního pøíkazu se automaticky spoèítají náklady stravného a založí se záznamy do tabulky Plánované náklady a Prùbìh CP. tak Skuteèné náklady a Dílèí náklady. //UC-2Rozfázování cestovního pøíkazuHlavní aktérUživatelSpouštìèUživatel klikne na Rozfázování  cestovního pøíkazuPøedpokladUživatel má pøístup do systémuNásledekHodnoty se uloží do databáze do tabulky Dílèí náklady a Skuteèné nákladyHlavní scénáøUživatel zvolí možnost Rozfázovat nákladyUživatel vyplní formuláøUživatel potvrdí formuláøSystém spoèítá stravnéSystém uloží hodnoty do databázeRozšíøeníSpeciální požadavkyOtevøené otázkyFázePole PovinnéTypPopisPoèáteèní datum YDate  Poèáteèní èas Ntime  Poèáteèní místo Nstring Koncové datumYdateKoncový èas Ydate  Koncové místo Nstring  Snídanì NbooleanCheckbox -> krácení stravného, pokud Ano Obìd NbooleanCheckbox -> krácení stravného, pokud Ano Veèeøe NbooleanCheckbox -> krácení stravného, pokud Ano Pouze pracovní dny NbooleanCheckbox, umožòuje spoèítat stravné za danou dobu4.1.3.1 REQ-01ca: Export/ImportUser story:Jako uživatel chci mít možnost vyexportovat záznamy a hromadnì je u sebe zeditovat a nahrát zpátky do systému.Acceptance criteria:Exportuji a úspìšnì nahraji záznamy.Jako uživatel budu chtít hromadnì upravovat fáze služební cesty. Fáze tedy bude možné vyexportovat ve formátu CSV a znovu nahrát. Poèet záznamu bude dosahovat maximálnì nižších desítek.4.1.4 REQ-01d: Uložení CP bez odeslání ke schváleníUser story: Jako uživatel chci, aby se uložily záznamy, které jsem doposud udìlal, abych mohl CP zavøít a další den, co otevøu CP, tyto zmìny vidìl.Acceptance criteria:Vyplnìní èásti formuláøe, zavøení CP, následnì jeho otevøení a ovìøení, že vyplnìné data se zde nacházejí./Cestovní pøíkaz se musí ukládat sám po každém poli, nelze tuto akci navázat na tlaèítko.Defaultní hodnota stavu cestovního pøíkazu: Ve zpracování4.1.5 REQ-01e: Zadání cestovního pøíkazu, který nejde do schvalováníCestovní pøíkaz se zadává stejnì jako v pøípadì schvalování.Po stisknutí tlaèítka odeslat, se cestovní pøíkaz automaticky pøepne do stavu Schváleno a nelze ho nijak upravovat.4.1.6 REQ-01f: Odstranìní CPUser story: Jako uživatel chci mít možnost odstranit CP, který jsem nikam neodeslal.Acceptance criteria:Vyplnìní èásti formuláøe,kliknutí na tlaèítko odstranit.Jako zadavatel mùžu svùj CP odstranit, pokud nebyl odeslán. REQ-02: Schvalování cestovního pøíkazu a schvalování vyúètování/Schvalování plánované cesty by mìlo být nastaveno parametricky. Plánovaná služební cesta mùže podléhat schvalování a nemusí. Poèet schvalovatelù se mùže lišit a nemusí být navázáno na hierarchickou strukturu.LUBPOL - dodá základní templaty schvalování.Do schvalovacího workflow bude odeslána identifikace schvalovatele z AD 4.2.1 REQ-02a: Schvalování plánovaného výjezduCestovní pøíkaz se bude øídit konfigurací schvalování plánovaného výjezdu. Pokud CP nemusí jít do schvalování, po odeslání formuláøe se automaticky pøepne stav na Schváleno.4.2.2 REQ-02b: Schvalování vyúètováníCestovní pøíkaz se bude øídit konfigurací schvalování vyúètování. Pokud CP nemusí jít do schvalování, po odeslání formuláøe se automaticky pøepne stav na Schváleno. REQ-03: Editace cestovního pøíkazu/User story: Jako uživatel chci mít možnost upravit cestovní pøíkaz, který mi byl vrácen k pøepracování, nebo, který nebyl ještì odeslán.Acceptance criteria:Otevøu daný CP a upravím pole, zavøu CP a po znovu otevøení si ovìøím, zda pole má novou hodnotu.Vytvoøený cestovní pøíkaz nebo vyúètování, který byl jednou odeslán ke schválení, si bude možné zobrazit pouze v read-only režimu.Pokud bude CP vrácen k pøepracování nebo nebyl ještì odeslaný ke schválení bude umožnìno pøepnutí do editaèního (write) modu. Pøepnout do režimu úprav bude mít pouze oprávnìný uživatel – tj. uživatel, který cestovní pøíkaz vytvoøil nebo zastupuje za danou osobu.Hodnoty se automaticky pøepíší poté, co se jejich hodnota v poli zmìní.UCEditace cestovního pøíkazuHlavní aktérUživatelSpouštìèUživatel klikne na Úpravu cestovního pøíkazuPøedpokladUživatel má právo editaceNásledekHodnoty se pøepíšou v databáziHlavní scénáøUživatel klikne na tlaèítko Úprava Uživatel zmìní hodnotyHodnoty se uloží v momentì, kdy je uživatel pøepíšeSystém updatuje hodnoty v databáziRozšíøeníSpeciální požadavkyOtevøené otázky REQ-04: Vyúètování služební cestyPoté, co CP je schválen, (automaticky, pokud CP nepùjde doschvalovacío workflow nebo po schválení posledním schvalovatelemú) mùže zamìstnanec provést vyúètování cesty vyplnìním sekce skuteèné náklady. Skuteèné náklady jsou navázané na cestovní pøíkaz.SystémPoèítá stravné, zaoukrouhlení, jízdné a náhrady vozidla, kapesné na základì vyplnìných údajù a údajù v tabulce VozidlaUživatelDeklaruje všechny ostatní nákladyHodnoty vyúètování se ukládají po každém vyplnìném poli. Poté, co bdue mít uživatel všechno vyplnìn, formuláø odešle. Podle toho, jak je workflow vyúètování nakonfigurované, se vyúètování automaticky pøepne do stavu schváleno nebo se pøepne do stavu Ve schvalování.UC-4Vyúètování služební cestyHlavní aktérUživatel, SystémSpouštìèUživatel klikne na Vyúètování služební cestyPøedpokladUživatel se vrátiol ze služební cestyNásledekHodnoty se uloží v databázi do Skuteèných a Plánovaných nákladùHlavní scénáøUživatel klikne na Vyúètování služební cestyUživatel vyplní hodnotyUživatel nahraje pøílohySystém ukládá prùbìžnì hodnoty do DBUživatel odešle vyúètování Systém spoèítá stravné, kapesné, jízdné, zaokrouhleníRozšíøeníV pøípadì zahranièního cestovního pøíkazu se zahranièní mìna konvertuje na mìnu lokálníSpeciální požadavkyOtevøené otázky 4.4.1 REQ-04a Odeslání vyúètování bez schváleníPokud vyúètování nejde do schválování, uživatel odešle formuláø a ten se automaticky pøepne do stavu Schváleno.4.4.2 REQ-04b: Vyúètování tuzemské služební cestyTuzemské cestovní pøíkazySekce Prùbìh CPPole PovinnéTypPopisPoèáteèní datum YDate  Poèáteèní èas Ntime  Poèáteèní místo Nstring Koncové datumYdateKoncový èas Ydate  Koncové místo Nstring  Snídanì NbooleanCheckbox -> krácení stravného, pokud Ano Obìd NbooleanCheckbox -> krácení stravného, pokud Ano Veèeøe NbooleanCheckbox -> krácení stravného, pokud Ano Typ vozidlaNTyp vozidlaDrop downÈíslo vozidlaNÈíslo vozidlaUživatel vyplòuje pouze pokud v pøedchozím pøípadì zvolil Osobní/Firemní automobil, osobní/firemná jednostopé vozidloUjetoNdecimalUživatel vyplòuje pouze v pøípadì, že v pøedešlém kroku zvolil osobní automobil nebo motorkuCena palivaNdecimalNepovinné poleSekce Náklady Náklady jsou nepovinný objektPole PovinnéTypPopisPøidat další nákladytlaèítkoUmožní pøidat „n“ typu nákladùTyp nákladuYPo stisknutí tlaèítka „Pøidat další náklady“ má uživatel právo vybrat náklady z èíselníku Typ nákladù. Pole se stává povinné po rozbalení.Datum vzniku nákladuYDateÈástkaNDecimalPovinné pole po pøidání typu nákladu.Nahrání pøíloh NtlaèítkoMožnost nahrát n pøíloh do sharepointu.NákladyNdecimalAutomaticky spoèítá všechny nákladyDimenzeNMožnost pøidání více dimenzí. Uživatel vybírá z pøiøazených hodnot.Zpùsob vyplaceníYTyp vyplaceníPouze hodnoty Pokladna nebo Bankovní úèet, nikoli Platební kartaKód bankovního úètuNBankovní úèetPovinné v pøípadì Zpùsob vyplacení = BankaÈíslo bankovního úètuNBankovní úèetPovinné v pøípadì Zpùsob vyplacení = BankaZúètovací datumYDateDatum splatnostiYDateZúètovací datum + „Platební podmínka (dny)“ z obecného nastaveníV sekci náklady by se mìla na stránce zobrazovat suma celkových nákladù.Zahranièní cestovní pøíkazyU zahranièních služebníct cest budou do sekcí pøidány následující položky.Sekce Prùbìh CPPole PovinnéTypPopisKód zemìNZemìPokud není vyplnìno, kód zemì = výchozí nastavená zemì, domácí zemì = trueSekce NákladyPole PovinnéTypPopisKód mìnyNMìnaPokud není vyplnìno, platí výchozí kód mìny, domácí mìna=trueÈástka (LM)NdecimalPouze u zahranièního CP! Automaticky pøepoèet na lokální mìnu.V sekci náklady by se mìla na stránce zobrazovat suma celkových nákladù, jak v zahranièních mìnách, tak po konverzi suma v lokální mìnì.REQ-04b: Vyúètování zahranièní služební cestyREQ-04c: Výpoèet tuzemského stravnéhoTrvání (dle  poèáteèního èasu a koncového data pro dané datum)Konfiguraèní tabulka Sazby zahranièních cestovních pøíkazùKód zemìKód mìnyPoèáteèní datumSazbaTrvání cesty 1Trvání cesty 2Trvání cesty 3Stravné 1Stravné 2Stravné 3Snížení diet 1Snížení diet 2Snížení diet 3ZákonStravné na tuzemské pracovní cestì øeší Zákoník práce v § 163:(1) Za každý kalendáøní den pracovní cesty pøísluší zamìstnanci stravné nejménì ve výšia) 140 Kè, trvá-li pracovní cesta 5 až 12 hodin,b) 212 Kè, trvá-li pracovní cesta déle než 12 hodin, nejdéle však 18 hodin,c) 333 Kè, trvá-li pracovní cesta déle než 18 hodin.Tato výše stravného se mìní v závislosti na vývoji cen provádìcím právním pøedpisem vydaným podle § 189.(2) Bylo-li zamìstnanci bìhem pracovní cesty poskytnuto jídlo, které má charakter snídanì, obìda nebo veèeøe, na které zamìstnanec finanènì nepøispívá (dále jen „bezplatné jídlo“), pøísluší zamìstnanci stravné snížené za každé bezplatné jídlo až o hodnotua) 70 % stravného, trvá-li pracovní cesta 5 až 12 hodin,b) 35 % stravného, trvá-li pracovní cesta déle než 12 hodin, nejdéle však 18 hodin,c) 25 % stravného, trvá-li pracovní cesta déle než 18 hodin./REQ-04d: Výpoèet zahranièního stravnéhoStravné se bude poèítat nad každým záznamem v tabulce Dílèí náklad. Do nápoètu stravného budou vstupovat následující parametry:Trvání (dle  poèáteèního èasu a koncového data pro dané datum)Konfiguraèní tabulka Sazby zahranièních cestovních pøíkazùKód zemìKód mìnyPoèáteèní datumDenní kapesnéSazbaTrvání cesty 1Trvání cesty 2Stravné 1Stravné 2Snížení diet 1Snížení diet 2Snížení diet 3Konfiguraèní tabulka Obecné nastaveníMinimální Doba Trvání Zahranièní Cesty S Tuzemským StravnýmZákonStravné na zahranièní pracovní cestì øeší Zákoník práce v § 170(1) Zamìstnanci pøísluší pøi zahranièní pracovní cestì zahranièní stravné v cizí mìnì ve výši a za podmínek dále stanovených.(3) Zamìstnanci pøísluší zahranièní stravné ve výši základní sazby, jestliže doba strávená mimo území Èeské republiky trvá v kalendáøním dni déle než 18 hodin. Trvá-li tato doba déle než 12 hodin, nejvýše však 18 hodin, poskytne zamìstnavatel zamìstnanci zahranièní stravné ve výši dvou tøetin této sazby zahranièního stravného, a ve výši jedné tøetiny této sazby zahranièního stravného, trvá-li doba strávená mimo území Èeské republiky 12 hodin a ménì, avšak alespoò 1 hodinu, nebo déle než 5 hodin, pokud zamìstnanci vznikne za cestu na území Èeské republiky právo na stravné podle § 163 nebo § 176. Trvá-li doba strávená mimo území Èeské republiky ménì než 1 hodinu, zahranièní stravné se neposkytuje.(4) Doby strávené mimo území Èeské republiky, které trvají 1 hodinu a déle pøi více zahranièních pracovních cestách v jednom kalendáøním dni, se pro úèely zahranièního stravného sèítají. Doby, za které nevznikne zamìstnanci právo na zahranièní stravné, se pøipoèítávají k dobì rozhodné pro poskytnutí stravného podle § 163.(5) Bylo-li zamìstnanci bìhem zahranièní pracovní cesty poskytnuto bezplatné jídlo, pøísluší zamìstnanci zahranièní stravné snížené za každé bezplatné jídlo až o hodnotua) 70 % zahranièního stravného, jde-li o zahranièní stravné v tøetinové výši základní sazby,b) 35 % zahranièního stravného, jde-li o zahranièní stravné ve dvoutøetinové výši základní sazby,c) 25 % zahranièního stravného, jde-li o zahranièní stravné ve výši základní sazby./REQ-04e: Konverze zahranièních nákladù na domácí mìnu U nákladu, který vznikne v cizí mìnì je tøeba èástku konvertovat do domácí mìny pomocí èíselníku Mìna. Záznam se tak uloží v tabulce Dílèí náklad, jak v mìnì lokální, tak zahranièní.REQ-04f: Výpoèet jízdného/REQ-04g: Výpoèet náhrady za osobní  vozidlaVýpoèet náhrady za osobní vozidla se bude poèítat pouze v pøípadì, že uživatel použije k pøepravì svùj automobil. /REQ-04h: Výpoèet kapesnéhoV pøípadì zahranièní služební cesty mùže zamìstnavatel stanovit kapesné. Hodnota mùže být až do 40%, nicménì toto nastavení bude nastaveno správcem a aplikace ji nijak neovìøuje.	Kapesné se poèítá na základì již zkráceného stravného a jeho hodnotou v Sazby zahraniènho stravného./REQ-04i: ZaoukrouhleníPøi výpoètu zkráceného stravného za každý den porovnáváme èástku v lokální mìnì s pøesností zaorkouhlení, která se nachází v konfiguraci - obecné nastavení. Pokud se daná èástka odlišuje od pøesnosti zaoukrouhlení, napø.  zkrácené stravné=132,12 ; míra zaokrouhlení= 0,1. Podle konfigurace zpùsobu zaokrouhlení (napø. Nahoru) se stravné spoèítá jako 132,2 a vzniká automaticky náklad typu zaokrouhlení =0,08. V pøípadì zaokrouhlení dolù se bude jednat o minusovou položku.REQ-04j: Nahrání pøíloh/Pøi vyúètování cestovního pøíkazu bude možné nahrát maximálnì nižší desítky pøíloh. Pøílohy nebudou omezeny formáty, ale bude se validovat velikost souboru. V DB je potøeba uložit identifikátor souboru v návaznosti na daný náklad, popø. Cestovní pøíkazJako úložištì souborù byl zvolen Sharepoint, s níž bude aplikace Cestovních pøíkazù provázána.Pøílohy nebude možné smazat. Na diagramu jsou identifikovány operace pro manipulaci s pøílohami. / REQ-05: Archivace cestovního pøíkazu 4.5.1 REQ-05a: Archivace cestovního pøíkazuCP pøíkazy budou archivovány následujícími zpùsoby:Schválením vyúètováníSprávce manuálnì pøesune CP do archivovaného stavuArchivované cestovní pøíkazy nebudou mazány. UCArchivace cestovního pøíkazuHlavní aktérSprávce, SystémSpouštìèSprávce klikne na tlaèítko archivovatVyúètování CP bude schváleno posledním schvalovatelem nebo automatickyPøedpokladCestovní pøíkaz existuje v evidenci a správce má oprávnìní archivovatNásledekHodnoty v DB Archivováno a Archivoval se updatujíHlavní scénáøArchivace byla vyvolánaSystém udpatuje hodnoty v DBRozšíøeníSpeciální požadavkyOtevøené otázky REQ-06: Správa èíselníkù - resourcesJako èíselník je oznaèována tabulka evidence klíèových hodnot pro vyplnìní cestovního pøíkazu. Jedná se o èíselníkyZamìstnanciVozidlaBankovních úètyZemìMìnaSmìnné kurzyPlatební kartySWIFT kodyKaždý èíselník obsahuje atribut ValidTo a ValidFrom. Hodnoty mùžou být naplnìny a nemusí. Pokud ValidFrom hodnota není naplnìna, nastaví se jako dnešní datum. Pokud ValidTo nebude naplnìno, bere se záznam jako aktivní.Odmazání záznamù nebude možné, pouze jejich zneaktivnìní.Dané operace budou zahrnovat patøièné validace, napø. zachování unikátnosti kodu zamìstnance, atd.ERP synchronizace bude pouze u Zamìstnancù, Vozidel a Bankovních úètù.UCSpráva èíselníkuHlavní aktérSprávce, ERPSpouštìèZmìna hodnot v ERPPøedpokladSprávce má oprávnìní spravovat èíselníkyERP bude synchronizovat zmìny do aplikaceNásledekHodnoty budou pøidány/updatoványHlavní scénáø 1Správce klikne na tlaèítko Pøidat nebo Upravit záznam Správce zadá hodnoty ruènì nebo batchovìHodnoty se pøidají do DBHlavní scénáø 2ERP zavolá API Pøidá/upraví hodnoty do DBHodnoty se pøidají do databázeRozšíøeníV pøípadì, že nedošlo k vyúètování bude možné CP znovu otevøít správcemSpeciální požadavkyPokud záznam neprojde validacemi, aplikace vyhodí chybovou hláškuOtevøené otázkyJak bude ERP napojené na aplikaci?Jaký zpùsob pro batchové zpracování záznamù bude použitV návaznosti na batchový záznam, pokud èást záznamù z batchového zpracování bude chybná, odmítne se pouze èást nebo celý batch?Co, když se upraví záznam bìhem toho, co CP bude ve schvalování? Název polePopisZamìstnanciÈíslo (ID uživatele v systému)JménoPøíjmeníE-mailTel. èísloSchvalovatel (ano/ne) ?Zástupce ve schválení (ano/ne) ?Èíslo zastupitele ?Výchozí bankovní úèet (navázané na zdrojový èíselník „Bankovní úèty“)Dimenze (n) – napø. Konzultant BCHodnoty dimenzeZodpovìdný za dimenze: napø. Konzultant BC, pokud žádná – pouze své. Možnost zadat nìco jako * =vše, popø. BC.* - tj. všechno, co spadá do BC.)Stav (aktivní /neaktivní – není v evidenci)Bankovní úètyKódID zamìstnanceNázevÈíslo bankovního úètuIBANKód SWIFTKód mìnyStav (aktivní /neaktivní – není v evidenci)VozidlaÈíslo (ID vozidla v systému) – napø. SPZVlastník (ID uživatele, kterému vùz patøí firma/zamìstnanec)ZnaèkaModelRegistraèní znaèkaVIN vozidlaTyp vozidla (osobní automobil, jednostopé motorové vozidlo, nákladní automobil, autobus, letadlo, vlak) – relace na èíselník „Typy vozidel“Vlastnictví vozidla (soukromé/firemní)Využití vozidla (individuální/sdílené)Zdvihový objem motoru vozidlaKombinovaná spotøeba palivaDruh palivaPoøizovací cena vozidla (pouze pro firemní vozy)Stav (aktivní /neaktivní – není v evidenci)Dimenze (n) Hodnoty dimenzeDimenze 1KódNázevHodnoty dimenze 1KódNázevDimenze 2KódNázevHodnoty dimenze 2KódNázevDimenze N – neomezený poèetKódNázevZemì/oblastiKódNázevKód ISOÈíselný kód ISOMìnyKódPopisSmìnné kurzyDatumKód mìny – relace na èíselník mìnMnožství smìnného kurzuSmìnný kurzPlatební karty(jedná se o firemní karty)Kód kartyStav karty Maskovaný PAN karty Držitel kartyDatum expirace kartyPøedpokládané datum doruèení kartyID uživatelù spojených s kartou (pokud se jedná o sdílenou)Kódy SWIFTKódNázevJazyknapø. CSY, ENU4.6.1 REQ-06a: Integrace èíselníkù s ERPImport nových hodnot a zmìny souèasných hodnot by mìlo zajistit ERP pomocí vystaveného rozhraní.Bude se jednat o èíselníky:ZamìstnanciBankovní úètyVozidla//V rámci integrace s ERP, bude vystaveno rozhraní cestovních pøíkazù, které umožní provádìt dané operace.Data budou synchronizovány s ERP metodou PUSH. Poèet volání za den je odhadováno na nižší desítky u èíselníku Vozidla a Zamìstnanci za den. 4.6.2 REQ-06b: Integrace hodnot smìnných kurzù/Smìnné kurzy budou stahovanými z následujícího odkazu – na základì triggeru – nenajdu-li platný záznam v DB, stáhnu z ÈNB.Základní mìnyMìny jsou aktualizované ÈNB každý pracovní den po 14:30 a platí na daný den . Pokud je to pracovní den pøed víkendem nebo státním svátkem, platí na následující sobotu, nedìli, nebo/a státní svátek.https://www.cnb.cz/cs/financni-trhy/devizovy-trh/kurzy-devizoveho-trhu/kurzy-devizoveho-trhu/denni_kurz.txt;jsessionid=F4C90CA223CEFEC342FF0967F39EF2F0?date=01.07.2024 Rozšíøené mìnyMìny jsou aktualizované ÈNB jednou mìsíènì k 31.7. po 14:30 a platí na celý následující mìsíc.https://www.cnb.cz/cs/financni-trhy/devizovy-trh/kurzy-ostatnich-men/kurzy-ostatnich-men/kurzy.txt?rok=2024&mesic=5 /UCIntegrace  hodnot smìnných kurzùHlavní aktérSystémSpouštìèNenachází-li se daný smìnný kurz v tabulcePøedpokladKurz pro základní mìny je publikován každý pracovní den ve 14.30 a platí ten den, popø. Ten den a následující nepracovní dnyKurz ostatních mìn je publikován na konci mìsíce po 14:30 a platí na následující mìsícNásledekHodnoty budou pøidányHlavní scénáø 1Systém si ovìøí v databázi, zda smìnný kurz pro danou mìnu pro daný èas existujePokud neexistuje, systém provolá Èeskou národní bankuHodnoty se pøidají do DBRozšíøeníSpeciální požadavkyOtevøené otázky4.6.3. REQ-06c: Import hodnot do èíselníkùERP systém bude orchestrovat pøidání záznamù ve správném poøadí, tj. Bankovní úèet mùže být pøidán až poté, co vytvoøen zamìstnanec./Import nových záznamù lze realizovat manuálnì v aplikaci nebo hromadným importem. Iniciální load mùže dosahovat až 6 000 záznamù do tabulky Zamìstnanci. Manuální zásah bude øízen konfigurací.Vložení záznamù bude procházet validacemi:Zda daný záznam existujeZda není duplicitníZda všechny povinné atributy jsou vyplnìnyZda reference (napø. Na Zamìstnance) existuje a daný referenèní záznam je aktivníZda validFrom, validTo není v minulostiV pøíapdì porušení validace, API zahlásí chybu.UCPøidání nového záznamu do èíselníkuHlavní aktérSprávce, oprávnìný uživatelSpouštìèKliknutí na pøidání nového záznamuNahrání filu s novými záznamyProvolání pøíslušného APIPøedpokladNásledekBudou provedeny validace ovìøení záznamuHodnoty budou pøidányHlavní scénáø 1Správce klikne na Pøidání nového záznamu do pøíslišného èíselníkuVyplní všechny relevantní poleZáznam se pøidáRozšíøeníHodnoty do èíselníku by se obecnì mìli dostat batchovì i manuálnìV pøípadì batchové a manuální úpravy bude nutné zkontrolovat konfiguraci zda jsou tyto možnosti povolenySpeciální požadavkyOtevøené otázky4.6.4 REQ-06d: Úprava záznamu v èíselníkuOprávnìná osoba bude mít oprávnìní upravit kterýkoli èíselník.  Manuální zásah bude øízen konfigurací.Úkony spojené se zásahem do èíselníku:Vyhledávání záznamùFiltrování záznamùPøidání nových záznamùÚprava existujících záznamùDeaktivace/Aktivace záznamùOdmazání hodnot nepovinných políValidace pro úpravu nových záznamùPovinná pole nejsou prázdnéValidTo, ValidFrom se nenachází v minulostiI zamìstnancù bude povolena úprava jména, pøíjmení, emailové adresy, telefonního èíslaNebude možná deaktivace záznamu, pokud bude otevøený CPV pøíapdì porušení validace, API zahlásí chybu./4.6.5 REQ-06e: Pøidání dimenze/Aplikace by mìla umožnit pøidání dimenze. Customizovatelný èíselník umožòuje pohled na cestovní pøíkaz dané hodnoty a výbìr by mìl být zobrazen pøi zadání cestovního pøíkazu.Customizovatelný èíselník bude obsahovat pouze pole Název, Hodnotu a Stav a bude navázán Cestovní pøíkaz.4.6.5 REQ-06f: Pøidání nové dimenze a navázání na èíselník Vozidel a ZamìstnanciSprávce by mìl mít možnost pøidat 1 až n dimenzí, které budou návázahy na èíselník Zamìstnanci nebo Vozidla.Tyto pole budou moci být vyplnìna pøi navádìní cestovního pøíkazu nebo vyúètování.Napø. Dimenze nákladové støedisko, kterému bude zamìstnanec pøiøazen. Zamìstnanec mùže spadat do vícero nákladovách støedisek./ REQ-07: Synchronizace CP s ERPCestovní pøíkaz bude synchronizovat uvedená data do ERP.CP -> ERP, která zajistí, synchronizaci s úèetní knihou v ERP v pøípadì že,Má být vyplacena zálohaSchválení vyúètování bylo dokonèeno4.7.2 REQ-07a: Synchronizace CP -> ERP/UCSynchronizace CP -> ERPHlavní aktérSystémSpouštìèSchválení CP, který má zálohuVyúètování CP bylo schváleno koneèným schvalovatelemPøedpokladNásledekCP odešle požadovaná data do ERP Hlavní scénáøAplikace CP odešle data do ERPRozšíøeníSpeciální požadavkyOtevøené otázkyJe to v XML, XSD se dodáTypÈíslo CPDruh nákladùKód mìnyÈástkaÈástka (LM)Èíslo zamìstnanceKód bankovního úètuÈíslo bankovního úètuIBANSWIFTOdeèet zálohyPopisÈíslo úètuPøedpis formátuTypÈíslo CPDruh nákladùKód mìnyÈástkaÈástka (LM)Èíslo zam.Kód bank. úètuÈíslo bank. úètuOdeèet zálohyZáloha24_CPTUZ_00001EUR4100ZAM00001B0001123/0100NeTypÈíslo CPDruh nákladùKód mìnyÈástkaÈástka (LM)Èíslo zam.Kód bank. úètuÈíslo bank. úètuOdeèet zálohyVyúètování24_CPTUZ_00001Stravné120NeVyúètování24_CPTUZ_00001MHD40NeVyúètování24_CPTUZ_00001Parkovné80NeVyúètování24_CPTUZ_00001-240ZAM00001B0001123/0100NeVyúètování24_CPTUZ_00001100Ano// REQ-08: Pøizpùsobení cestovního pøíkazu - nice to have/Uživatel si bude moci pøizpùsobit CP – pouze pokud by to technologie umožnila by default. Možný problém – skrytí povinného pole.UCSynchronizace CP -> ERPHlavní aktérUživatelSpouštìèPøedpokladNásledekHlavní scénáøUživatel vybere, že nekterá pole chce pøesunout nebo skrýtUživatel uloží zmìnyRozšíøeníSpeciální požadavkyOtevøené otázkyBude to možné v dané technologii? Jak se stavìt k tomu, když nìkterá pole budou povinná?/ REQ-09: Tisk CPCestovní pøíkaz by mìlo být možné vytisknout.UCTiskHlavní aktérUživatelSpouštìèUživatel klikne na tlaèítko tiskPøedpokladNásledekOdeslání sestavy na tiskárnuHlavní scénáøUživatel klikne na tlaèítko tiskZobrazí se okno s volbami tiskuSystém odešle tisk CP na vybranou tiskárnuRozšíøeníSpeciální požadavkyOtevøené otázkyREQ-10: Kopírování CPExistující cestovní pøíkaz by mìlo být možné zkopírovat sev šemi poli. Daný cestovní pøíkaz bude mít nový identifikátor a bude editovatelný a automaticky se pøepne do stavu: Ve zpracování.REQ-11: Okno s fakty/V postranním menu by mìlo být zobrazeno okno s fakty, které bude obsahovat napoètené i základní informace:Sekce cestovní pøíkazyPoužití vozidlaJízdnéStravnéKapesnéZaokrouhleníZaoukrouhlená èástka vyúètovaných nákladùRozdíl nákladù (plánované vs skuteèné)Sekce Detaily zamìstnanceÈísloÈíslo vozidlaTelefonní èísloMobilE-MailSekce Statistika zamìstnanceOtevøené tuzemské cest. pøíkazyOtevøené zahranièní cest. pøíkazyVydané tuzemské cest. pøíkazyVydané zahranièní cest.SaldoSplatné saldo/REQ-12: Proklik na kartu zamìstnance/Uživatel bude moci otevøít kartu zamìstnance navigací na Kód zamìstnance. Okno s fakty bude obsahovat následující údaje:Kód zamìstnanceJménoTelefonní èísloEmailÈíslo vozidla, je-li v evidenciNa kartì zamìstnance se nebude nacházet Èíslo bankovního úètu, èi firemní platební karta./REQ-13: Role a oprávnìní/Všichni zamìstnanci budou mít pøístup do aplikace.V aplikaci CP existují 2 role:SprávceUživatelSprávce bude mít nastavena všechna oprávnìní a bude moci pøiøadit oprávnìní roli uživatele.Oprávnìní manipulace s CP a èíselníkyVytvoøení èíselníkuUpravení èíselníku Otevøení zarchivovaného CP (nikoli po vyúètování)Navádìní CPArchivace CPVytváøení reportuÚprava konfiguraceUživatel bude vidìt pouze svoje cestovní pøíkazy, není-li tomu jinak uvedeno v tabulce Zamìstnancù. Zároveò v tabulce Zamìstnancù bude možnost nadefinovat skupiny uživatelù, které mám právo vidìt. Tyto skupiny mùžou a nemusí vyplývat z hierarchie organizace a lze je nadefinovat do nové dimenze.Právo zakládat Cestovní pøíkazy bude mít pouze zamìstnanec sám sobì, není-li tomu jinak. Aplikace cestovní pøíkazy, popø. tabulka zamìstnancù by mìla umožnit nadefinovat vazbu, kdo a komu mít oprávnìní založit nebo upravit Cestovní pøíkaz, napø. vztah asistent – øeditel. REQ-14: Autentizace a autorizace uživateleUživatel se bude autentizovat a autorizovat pøes AD a Microsoft EntraID.REQ-15: ReportyUser story: Jako oprávnìný uživatel chci mít možnost udìlat report cestovních pøíkazù.Acceptance CriteriaUživatel klikne na tlaèítko Report a zobrazí se  sestava polí CP.REQ-16: Retence dat/Data jako podklad pro úèetnictví musí být uchována 10 let, tudíž data CP nejsou odmazána. Data o zamìstnancích podléhají zákonu GDPR. TBDREQ-17: Jazyková mutaceUser story: Jako uživatel chci mít možnost pøepnout CP do angliètiny.Acceptance CriteriaVšechny kroky a pole cestovního pøíkazu se zobrazují v angliètinì./Uživatel by mìl mít možnost si nastavit aplikaci ve výchozím jazyce (tj. Èeština) nebo angliètinì.REQ-18: Nastavení konfiguraceREQ-18a: Zmìna nastaveníUser story: Jako oprávnìný uživatel chci mít možnost mìnit konfiguraci.Acceptance CriteriaPodle platnosti data konfiguraci UCNastavení konfiguraceHlavní aktérUživatel, SprávceSpouštìèPøedpokladUživatel má oprávnìní mìnit konfiguraceNásledekVýpoèty se budou realizovat podle platnosti konfiguraceHlavní scénáøUživatel vybere konfiguraci, kterou chce zmìnitUživatel zadá konfiguraciUživatel uloží konfiguraciRozšíøeníSpeciální požadavkyOtevøené otázkyKdokoliv oprávnìný mùže zmìnit hodnoty v konfiguraci konfiguraci. REQ-19: Rotace klíèù ERP systém bude napojený na aplikaci CP pomocí klíèe. V pøípadì kompromitace klíèe je nutné zajistit rotaci klíèu.V CP bude správa klíèù - správce v pøípadì kompromitace klikne na vytvoøení/rotaci klíèe.
